# =============================================================================
# Knowwhere Memory MCP Server - Environment Configuration
# =============================================================================

# Server Configuration
HOST=0.0.0.0
PORT=8000
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# Database (PostgreSQL + pgvector)
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key
DATABASE_URL=postgresql://user:password@localhost:5432/knowwhere
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20

# =============================================================================
# Redis Cache
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
CACHE_TTL_MEMORIES=3600
CACHE_TTL_PREFERENCES=86400

# =============================================================================
# OpenAI (Embeddings)
# =============================================================================
OPENAI_API_KEY=sk-your-openai-api-key
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSIONS=1408

# =============================================================================
# LLM Provider (for consolidation, entity extraction)
# =============================================================================
LLM_PROVIDER=anthropic  # anthropic or openai
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
OPENAI_LLM_MODEL=gpt-4-turbo-preview

# =============================================================================
# Authentication (JWT + API Keys)
# =============================================================================
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
API_KEY_PREFIX=kw_prod

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# =============================================================================
# Object Storage (S3/R2/GCS for document uploads)
# =============================================================================
STORAGE_PROVIDER=s3  # s3, r2, gcs
STORAGE_BUCKET=knowwhere-documents
STORAGE_REGION=us-east-1
STORAGE_ACCESS_KEY=your-s3-access-key
STORAGE_SECRET_KEY=your-s3-secret-key
STORAGE_ENDPOINT_URL=  # For R2/MinIO, e.g., https://account-id.r2.cloudflarestorage.com
STORAGE_MAX_FILE_SIZE_MB=50

# =============================================================================
# Document Processing
# =============================================================================
DOCUMENT_CHUNK_SIZE=1000
DOCUMENT_CHUNK_OVERLAP=200
TESSERACT_PATH=  # Path to tesseract binary for OCR

# =============================================================================
# Consolidation Thresholds
# =============================================================================
CONSOLIDATION_DUPLICATE_THRESHOLD=0.85
CONSOLIDATION_CONFLICT_THRESHOLD_LOW=0.5
CONSOLIDATION_CONFLICT_THRESHOLD_HIGH=0.85

# =============================================================================
# Feature Flags
# =============================================================================
FEATURE_KNOWLEDGE_GRAPH=true
FEATURE_DOCUMENT_PROCESSING=true
FEATURE_EVOLUTION_TRACKING=true
